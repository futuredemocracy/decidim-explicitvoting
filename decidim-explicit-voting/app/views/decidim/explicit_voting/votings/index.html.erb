<div class="row columns">
  <div class="title-action">
    <h2 class="title-action__title section-heading">
      Głosowania Jawne
    </h2>
  </div>
</div>

<div class="row">
  <div class="columns">
    <div class="card-grid">
      <% votings.each do |voting| %>
        <article class="card card--full card--process">
          <div class="card__content">
            <div class="card__header">
              <%= link_to voting_path(voting), class: "card__link" do %>
                <h5 class="card__title">
                  <%= voting.title.is_a?(Hash) && voting.title["pl"] ? voting.title["pl"] : "Nowe głosowanie" %>
                </h5>
              <% end %>
            </div>
            <div class="card__text">
              <div class="card__text--paragraph">
                <%= voting.description.is_a?(Hash) && voting.description["pl"] ? voting.description["pl"] : "Brak opisu" %>
              </div>
            </div>
            
            <div class="card-data">
              <div class="card-data__item">
                <div class="card-data__item--center">
                  <div class="text-medium">
                    <% if voting.active? %>
                      <span class="label success">Aktywne</span>
                    <% elsif voting.upcoming? %>
                      <span class="label warning">Nadchodzące</span>
                    <% else %>
                      <span class="label alert">Zakończone</span>
                    <% end %>
                  </div>
                </div>
              </div>
            </div>
            
            <div class="card-data">
              <div class="card-data__item">
                <div class="card-data__item--center">
                  <div class="text-medium">
                    <strong>Data zakończenia:</strong>
                    <%= l voting.end_date, format: :long %>
                  </div>
                </div>
              </div>
            </div>
            
            <div class="card-data">
              <div class="card-data__item">
                <div class="card-data__item--center">
                  <div class="text-medium">
                    <strong>Głosy:</strong>
                    <% if voting.finished? || !voting.secret? %>
                      <%= voting.votes.count %>
                    <% else %>
                      Ukryte
                    <% end %>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <div class="card__footer">
            <div class="card__support">
              <div class="card__support__data"></div>
              <div class="card__support__button">
                <%= link_to voting_path(voting), class: "card__button button button--sc small" do %>
                  <span>Zobacz szczegóły</span>
                <% end %>
              </div>
            </div>
          </div>
        </article>
      <% end %>
    </div>
  </div>
</div> 